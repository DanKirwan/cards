<div ng-controller="cardController" ng-init="initGameplay()" layout="column" style="height: 500px; overflow:hidden;" md-swipe-right="openSideNav()" md-swipe-left = "closeSideNav()" >

    <md-toolbar layout="column">

        <div class="md-toolbar-tools cg__toolbar" style="z-index: 10" ng-style = "!gamePlay.isJudge ? {'box-shadow' : ' 0 0 15px rgba(100, 100, 100, 100)'} : {'box-shadow' :'none'}" >
            <md-button ng-click="game.leave()" class="md-icon-button" aria-label="Main Menu">
                <md-icon md-svg-icon="img/arrow_back-48dp.svg" style="fill:white;"></md-icon>
            </md-button>

            <h2 flex  style="text-align:center;" ng-hide="gamePlay.judging">Time Left: {{gamePlay.roundTime}}</h2>
            <h2 flex  style="text-align:center;" ng-show="gamePlay.judging">Judging Countdown: {{gamePlay.judgeTime}}</h2>



            <div layout="column" layout-align="center center" >

                <p style="margin:1px; font-size:10px;">Game Code</p>
                <h1>{{globals.gameId}}</h1>

            </div>
        </div>

        <div ng-show="gamePlay.isJudge"   ng-style = "gamePlay.isJudge ? {'box-shadow' : ' 0 0 15px rgba(100, 100, 100, 100)'} : {'box-shadow' :'none'}" class="cg__toolbar" flex>
            <div style="text-align:center;"> You are the Card Czar </div>
        </div>

    </md-toolbar>

    <md-sidenav class="md-sidenav-left" md-component-id="left" md-swipe-right="openSideNav()" md-swipe-left = "closeSideNav()">
        <md-toolbar>
            <h1>Test :)</h1>
        </md-toolbar>
        <a class = "md-button" md-whiteframe="5" href="#!" style="color:black">Menu</a>



        <h3 flex class = "cg__heading"> Players</h3>
        <md-list>
            <md-list-item ng-repeat="player in game.players">
                <h3 flex>{{player.name}}</h3>

                <md-icon ng-show="game.isAdmin && !player.admin" class="md-secondary" md-svg-icon="img/remove_player-48dp.svg" ng-click="game.removePlayer(player.name)">
                    <md-tooltip md-direction="left" md-delay = "100">Remove Player</md-tooltip>
                </md-icon>


                <h3>{{player.points}}</h3>


            </md-list-item>
        </md-list>

    </md-sidenav>


    <div class="selectingContainer" ng-hide="gamePlay.judging || gamePlay.isJudge;">



        <black-card layout="column" ng-class="{'cardSelected': gamePlay.selectedCard != null  }" id="blackCard">
            <div ng-bind-html="gamePlay.blackCard"></div>
        </black-card>


        <white-card ng-show="gamePlay.selectedCard !== null" id="selectedCard"  ng-click = "gamePlay.selectCard(gamePlay.selectedCard)">

            {{gamePlay.selectedCard.text}}

        </white-card>

    </div>


    <div class="cardContainer" layout="row" md-swipe-down = 'unfocusCards()'  md-swipe-up = 'focusCards()' ng-hide="gamePlay.judging|| gamePlay.isJudge;" >
        <white-card  ng-repeat="card in gamePlay.myHand"  class="cardContainer__card " ng-click = "gamePlay.selectCard(card)" ng-hide="card.selected">
                {{card.text}}
        </white-card >
    </div>


    <!-- Page setup when judge -->

    <div style="background:grey;" ng-controller = "judgeController" class="judgeContainer" ng-show = "gamePlay.judging || gamePlay.isJudge;"  md-swipe-right="openSideNav()" md-swipe-left = "closeSideNav()">

        <black-card class="judgeContainer__blackCard" ng-class = "{'judgeContainer__blackCard--choosing' : judgeChoosing}" ng-click="judgeChoosing = !judgeChoosing" >

            {{gamePlay.blackCard}}

        </black-card>

        <md-button class = "judgeContainer__confirmbtn" ng-show = 'gamePlay.chosenJudgeCard !== null' ng-click="gamePlay.confirmJudgeCard()">
            Confirm Card Selection
        </md-button>

        <md-grid-list  md-cols = "{{getCardColumns()}}" md-row-height = "2:3" md-gutter = "0.5%" style="margin-left:8px; margin-right:8px;">

            <md-grid-tile ng-repeat="card in gamePlay.judgeCards">
                <white-card ng-disabled="!gamePlay.isJudge" class="judgeContainer__card  " ng-class="{'judgeContainer__card--selected': card.selected}" ng-click = 'gamePlay.pickJudgeCard(card)'>
                        <div ng-bind-html="card.text"></div>
                </white-card>

            </md-grid-tile>

        </md-grid-list>
    </div>



</div>