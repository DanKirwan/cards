<div ng-controller="cardController" ng-init="initGameplay()" layout="column" style="height: 500px; overflow:hidden;" md-swipe-right="openSideNav()" md-swipe-left = "closeSideNav()" >

    <md-toolbar>

        <div class="md-toolbar-tools cg__toolbar">
            <md-button ng-click="game.leave()" class="md-icon-button" aria-label="Main Menu">
                <md-icon md-svg-icon="img/arrow_back-48dp.svg" style="fill:white;"></md-icon>
            </md-button>

            <h2 flex  style="text-align:center;" ng-hide="gamePlay.judging">Time Left: {{gamePlay.roundTime}}</h2>
            <h2 flex  style="text-align:center;" ng-show="gamePlay.judging">Judging Countdown: {{gamePlay.judgeTime}}</h2>



            <div layout="column" layout-align="center center" >

                <p style="margin:1px; font-size:10px;">Game Code</p>
                <h1>{{globals.gameId}}</h1>

            </div>
        </div>

    </md-toolbar>

    <md-sidenav class="md-sidenav-left" md-component-id="left" md-swipe-right="openSideNav()" md-swipe-left = "closeSideNav()">
        <md-toolbar>
            <h1>Test :)</h1>
        </md-toolbar>
        <a class = "md-button" md-whiteframe="5" href="#!" style="color:black">Menu</a>



        <h3 flex class = "cg__heading"> Players</h3>
        <md-list>
            <md-list-item ng-repeat="player in game.players">
                <h3 flex>{{player.name}}</h3>

                <md-icon ng-show="game.isAdmin && !player.admin" class="md-secondary" md-svg-icon="img/remove_player-48dp.svg" ng-click="game.removePlayer(player.name)">
                    <md-tooltip md-direction="left" md-delay = "100">Remove Player</md-tooltip>
                </md-icon>


                <h3>{{player.points}}</h3>


            </md-list-item>
        </md-list>

    </md-sidenav>


    <div class="movingCardContainer" ng-hide="gamePlay.judging || gamePlay.isJudge;">



        <div layout="column" ng-class="{'cardSelected': gamePlay.selectedCard != null  }" class="card cardContainer__card" id="blackCard">

            <div class="cardContainer__card__textContainer">
                {{gamePlay.blackCard}}
            </div>

            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">


        </div>


        <md-button ng-show="gamePlay.selectedCard !== null" class="card cardContainer__card" id="selectedCard"  ng-click = "gamePlay.selectCard(gamePlay.selectedCard)">

            <div class = "cardContainer__card__textContainer">
                {{gamePlay.selectedCard.text}}

            </div>


            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
        </md-button>




    </div>


    <div class="cardContainer" md-swipe-down = 'unfocusCards()' md-swipe-up = 'focusCards()' ng-hide="gamePlay.judging|| gamePlay.isJudge;" >
        <md-button  ng-repeat="card in gamePlay.myHand" class="card cardContainer__card " ng-class = "{'cardContainer__card--notFocused' : !cardsFocussed}" ng-click = "gamePlay.selectCard(card)" ng-hide="card.selected">

            <div class="cardContainer__card__textContainer">
                {{card.text}} <!--TODO make the card text into card objects with selected and stuff-->
            </div>

            <!--This is an empty image which is used to preserve aspect ratio-->
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
        </md-button>
    </div>


    <!-- Page setup when judge -->

    <div style="background:grey;" ng-controller = "judgeController" class="judgeContainer" ng-show = "gamePlay.judging || gamePlay.isJudge;"  md-swipe-right="openSideNav()" md-swipe-left = "closeSideNav()">

        <div class="card judgeContainer__blackCard" ng-class = "{'judgeContainer__blackCard--choosing' : judgeChoosing}" ng-click="judgeChoosing = !judgeChoosing" >
            <div class = "cardContainer__card__textContainer">
                {{gamePlay.blackCard}}

            </div>
            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
        </div>

        <md-button class = "judgeContainer__confirmbtn" ng-show = 'gamePlay.chosenJudgeCard !== null' ng-click="gamePlay.confirmJudgeCard()">
            Confirm Card Selection
        </md-button>

        <md-grid-list md-cols = "{{getCardColumns()}}" md-row-height = "63:88" md-gutter = "0.5%" style="margin-left:8px; margin-right:8px;">

            <md-grid-tile ng-repeat="card in gamePlay.judgeCards">
                <md-button ng-disabled="!gamePlay.isJudge" class="card judgeContainer__card  " style="height: 100%" ng-class="{'judgeContainer__card--selected': card.selected}" ng-click = 'gamePlay.pickJudgeCard(card)'>
                    <div class = "cardContainer__card__textContainer">
                        {{card.text}}
                    </div>

                </md-button>

            </md-grid-tile>

        </md-grid-list>
    </div>



</div>